---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: tests.chainsaw.kyverno.io
spec:
  group: chainsaw.kyverno.io
  names:
    kind: Test
    listKind: TestList
    plural: tests
    singular: test
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Test is the resource that contains aa test definition.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Test spec.
            properties:
              steps:
                description: Steps defining the test.
                items:
                  description: TestStepSpec defines the desired state and behavior
                    for each test step.
                  properties:
                    apply:
                      description: Apply lists the resources that should be applied
                        for this test step. This can include things like configuration
                        settings or any other resources that need to be available
                        during the test.
                      items:
                        description: Apply represents a set of configurations or resources
                          that should be applied during testing.
                        properties:
                          file:
                            description: File is the path to the referenced file.
                            type: string
                        required:
                        - file
                        type: object
                      type: array
                    assert:
                      description: Assert represents the assertions to be made for
                        this test step. It checks whether the conditions specified
                        in each assertion hold true.
                      items:
                        description: Assert represents a test condition that is expected
                          to hold true during the testing process.
                        properties:
                          file:
                            description: File is the path to the referenced file.
                            type: string
                        required:
                        - file
                        type: object
                      type: array
                    delete:
                      description: Delete provides a list of objects that should be
                        deleted before this test step is executed. This helps in ensuring
                        that the environment is set up correctly before the test step
                        runs.
                      items:
                        description: Delete is a reference to an object that should
                          be deleted
                        properties:
                          apiVersion:
                            description: API version of the referent.
                            type: string
                          kind:
                            description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                            type: string
                          labels:
                            additionalProperties:
                              type: string
                            description: Label selector to match objects to delete
                            type: object
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                          namespace:
                            description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                            type: string
                        required:
                        - apiVersion
                        - kind
                        type: object
                      type: array
                    error:
                      description: Error lists the expected errors for this test step.
                        If any of these errors occur, the test will consider them
                        as expected; otherwise, they will be treated as test failures.
                      items:
                        description: Error represents an anticipated error condition
                          that may arise during testing. Instead of treating such
                          an error as a test failure, it acknowledges it as expected.
                        properties:
                          file:
                            description: File is the path to the referenced file.
                            type: string
                        required:
                        - file
                        type: object
                      type: array
                    timeout:
                      description: Timeout for the test step. Overrides the global
                        timeout set in the Configuration and the timeout eventually
                        set in the Test.
                      type: string
                  type: object
                type: array
              timeout:
                description: Timeout for the test. Overrides the global timeout set
                  in the Configuration.
                type: string
            required:
            - steps
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
